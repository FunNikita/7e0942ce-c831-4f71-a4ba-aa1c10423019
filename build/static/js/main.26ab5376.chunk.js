(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{184:function(e,t,n){e.exports=n(240)},236:function(e,t,n){},240:function(e,t,n){"use strict";n.r(t);n(185),n(210);var a=n(0),r=n.n(a),s=n(91),o=n.n(s),i=n(8),c=n.n(i),l=n(92),u=n(93),d=n(111),h=n(94),p=n(112),f=n(9),m=n(15),b=(n(226),n(43)),k=n.n(b),_=n(44),g=n.n(_),v=n(101),y=n.n(v),E=n(105),S=n.n(E),w=n(103),O=n.n(w),F=n(100),j=n.n(F),A=n(104),M=n.n(A),V=n(37),G=n.n(V),P=n(102),T=n.n(P),W=n(106),K=n.n(W),C=n(99),x=n.n(C);n(82);function z(e){var t=Object.keys(e.posts).map(function(t){return r.a.createElement("div",{key:t.id},r.a.createElement(x.a,{disabled:!0,multiline:!0,before:r.a.createElement(j.a,{size:48,src:e.posts[t].photo_50}),onClick:function(){return function(e){var t=window.document.createElement("a");t.target="_blank",t.href=e;var n=window.document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),t.dispatchEvent(n)}("https://vk.com/id"+e.posts[t].id)}},"".concat(e.posts[t].first_name," ").concat(e.posts[t].last_name)))});return r.a.createElement("div",null,t)}var B=function(e){return r.a.createElement(k.a,{id:e.id},r.a.createElement(g.a,null,r.a.createElement(y.a,{status:e.name},"\u0413\u043b\u0430\u0432\u043d\u0430\u044f")),r.a.createElement(T.a,{onRefresh:e.onRefresh,isFetching:e.fetching},!0===e.error_menu?r.a.createElement(O.a,{header:r.a.createElement(M.a,{mode:"secondary",className:"noselect"},"\u0414\u0440\u0443\u0437\u044c\u044f-\u0412\u0435\u0437\u0434\u0435\u043a\u043e\u0434\u0435\u0440\u044b (",e.friends_count,")")},r.a.createElement(z,{posts:e.friend_items})):null,!1===e.error_menu&&!1===e.error_keyboard?r.a.createElement(G.a,null,e.error_text):null,!1===e.error_menu&&!0===e.error_keyboard?r.a.createElement(G.a,{action:r.a.createElement(S.a,{before:r.a.createElement(K.a,null),onClick:e.getFriendGet,size:"l"},"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f")},e.error_text):null),e.snackbar)},I=n(108),R=n.n(I),U=n(107),N=n.n(U),D=function(e){return r.a.createElement(k.a,{id:e.id},r.a.createElement(g.a,null,e.name),r.a.createElement(G.a,{icon:r.a.createElement(N.a,null),stretched:!0},e.description))},J=n(59),L=n.n(J),H=n(109),q=n.n(H),Q=n(110),X=n.n(Q);n(236);var Y=n(237),Z=n(239),$=Y.parse(window.location.hash),ee=Y.parse(window.location.search.substring()),te={};Object.keys(ee).sort().forEach(function(e){"vk_"===e.slice(0,3)&&(te[e]=ee[e])});var ne={backgroundColor:"var(--accent)"},ae={backgroundImage:"linear-gradient(135deg, #ffb73d, #ffa000)"},re=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(h.a)(t).call(this,e))).getInfo=function(e){e&&n.setState({is_coupon:e.is_coupon,coupon_id:e.coupon.id,coupon_wall:e.coupon_wall,coupon_link:e.coupon.link,coupon_title:e.coupon.title,coupon_icon:e.coupon.icon,coupon_organization:e.coupon.organization,contest_link:e.contest,chat_link:e.chat,is_promise:e.is_promise,promise_user:e.promise,promise_date:e.date_promise,is_token_friends:e.is_token_friends})},n.getFriendGetToken=function(e){if(!e)return console.log("is not token");c.a.send("VKWebAppCallAPIMethod",{method:"groups.getMembers",request_id:"groups.getMembers",params:{group_id:197700721,filter:"friends",fields:"photo_50",v:"5.151",access_token:e}}).then(function(e){Z(e.response.items,898);0==e.response.count?(n.setState({error_menu:!1,error_keyboard:!1}),n.setState({error_text:"\u041f\u043e\u0445\u043e\u0436\u0435, \u0443 \u0412\u0430\u0441 \u043d\u0435\u0442 \u0434\u0440\u0443\u0437\u0435\u0439-\u0432\u0435\u0437\u0434\u0435\u043a\u043e\u0434\u0435\u0440\u043e\u0432 :("})):(n.setState({error_menu:!0,error_keyboard:!1}),n.setState({error_text:""}),n.setState({friends_count:e.response.count,friend_items:e.response.items}))})},n.authParams=function(){-1==te.vk_access_token_settings.indexOf("groups")?n.getFriendsSnack():n.getFriendGet()},n.go=function(e){n.closePopout(),n.closeModal(),n.setState({activePanel:e.currentTarget.dataset.to}),n.setState({snackbar:null})},n.modal=function(e){window.history.pushState({modal:e.currentTarget.dataset.to},"".concat(e.currentTarget.dataset.to)),n.setState({activeModal:e.currentTarget.dataset.to})},n.onRefresh=function(){n.setState({fetching:!0})},n.state={activePanel:"home",popout:null,fetching:!1,friends_count:0,text:"",friend_items:[],snackbar:null,is_token_friends:0,error_menu:!1,error_text:"\u041d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430\u043c",error_keyboard:!0,errorDescription:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0435 \u0440\u0430\u0431\u043e\u0442\u044b.",token:null},n.goBack=n.goBack.bind(Object(f.a)(Object(f.a)(n))),n.closePopout=n.closePopout.bind(Object(f.a)(Object(f.a)(n))),n.closeModal=n.closeModal.bind(Object(f.a)(Object(f.a)(n))),n.closeModalTokenFriends=n.closeModalTokenFriends.bind(Object(f.a)(Object(f.a)(n))),n.openBase=n.openBase.bind(Object(f.a)(Object(f.a)(n))),n.getFriendsSnack=n.getFriendsSnack.bind(Object(f.a)(Object(f.a)(n))),n.openError=n.openError.bind(Object(f.a)(Object(f.a)(n))),n.successShare=n.successShare.bind(Object(f.a)(Object(f.a)(n))),n}return Object(p.a)(t,e),Object(u.a)(t,[{key:"getFriendsSnack",value:function(){var e=this;this.state.snackbar||this.setState({snackbar:r.a.createElement(m.d,{layout:"vertical",onClose:function(){e.getFriendGet(),e.closeModalTokenFriends(),e.setState({snackbar:null})},action:"\u041f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f",before:r.a.createElement(m.a,{size:24,style:ae},r.a.createElement(R.a,{fill:"#fff",width:14,height:14}))},"\u0414\u043b\u044f \u0442\u043e\u0433\u043e, \u0447\u0442\u043e\u0431\u044b \u0443\u0437\u043d\u0430\u0442\u044c \u0434\u0440\u0443\u0437\u0435\u0439-\u0432\u0435\u0437\u0434\u0435\u043a\u043e\u0434\u0435\u0440\u043e\u0432, \u043c\u0438\u043d\u0438-\u043f\u0440\u0438\u043b\u043e\u0436\u0435\u043d\u0438\u044e \u043d\u0443\u0436\u043d\u043e \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430\u043c.")})}},{key:"goBack",value:function(){this.setState({popout:null})}},{key:"openBase",value:function(){var e=this;this.state.snackbar||this.setState({snackbar:r.a.createElement(m.d,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(m.a,{size:24,style:ne},r.a.createElement(L.a,{fill:"#fff",width:14,height:14}))},"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u0441\u043a\u043e\u043f\u0438\u0440\u043e\u0432\u0430\u043d\u0430.")})}},{key:"openError",value:function(){var e=this;this.state.snackbar||this.setState({snackbar:r.a.createElement(m.d,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(m.a,{size:24,style:ne},r.a.createElement(q.a,{fill:"#fff",width:14,height:14}))},this.state.message_error)})}},{key:"internetError",value:function(){var e=this;this.state.snackbar||this.setState({snackbar:r.a.createElement(m.d,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(m.a,{size:24,style:ne},r.a.createElement(X.a,{fill:"#fff",width:14,height:14}))},"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442-\u0441\u043e\u0435\u0434\u0438\u043d\u0435\u043d\u0438\u0435 \u043f\u043e\u0442\u0435\u0440\u044f\u043d\u043e :(")})}},{key:"successShare",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"\u0423\u0441\u043f\u0435\u0448\u043d\u043e!";this.state.snackbar||this.setState({snackbar:r.a.createElement(m.d,{layout:"vertical",onClose:function(){return e.setState({snackbar:null})},before:r.a.createElement(m.a,{size:24,style:ne},r.a.createElement(L.a,{fill:"#fff",width:14,height:14}))},"\ud83d\udce2 ",t)})}},{key:"componentDidMount",value:function(){var e=this;this.setState({popout:r.a.createElement(m.c,null)}),document.addEventListener("keydown",this.escFunction,!1),window.addEventListener("popstate",function(t){return t.preventDefault()&e.menu(t)}),window.history.pushState({panel:"home"},"home"),c.a.subscribe(function(t){switch(t.detail.type){case"VKWebAppGetUserInfoResult":e.setState({popout:null}),e.setState({fetchedUser:t.detail.data}),e.authParams(),$.h&&(e.setState({hash_check:$.h}),e.checkHash());break;case"VKWebAppAccessTokenFailed":c.a.send("VKWebAppTapticNotificationOccurred",{type:"error"}),e.setState({error_menu:!1,error_keyboard:!0}),e.setState({error_text:"\u041f\u043e\u0445\u043e\u0436\u0435, \u0412\u044b \u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0432\u043e\u0438\u043c \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u0430\u043c :("});break;case"VKWebAppAccessTokenReceived":e.getFriendGetToken(t.detail.data.access_token);break;case"VKWebAppJoinGroupResult":e.successShare("\u0421\u043f\u0430\u0441\u0438\u0431\u043e \u0437\u0430 \u043f\u043e\u0434\u043f\u0438\u0441\u043a\u0443 \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u0441\u0442\u0432\u043e :)");case"VKWebAppCallAPIMethodResult":console.log(t.detail.type)}}),c.a.send("VKWebAppGetUserInfo",{})}},{key:"getLocationHash",value:function(){return window.location.hash.replace("#","")}},{key:"menu",value:function(e){e.state?(this.setState({activePanel:e.state.panel}),this.setState({copy:!0}),this.setState({snackbar:null})):c.a.send("VKWebAppClose",{status:"success",payload:{name:"test"}})}},{key:"getFriendGetModal",value:function(){this.getFriendsSnack()}},{key:"getFriendGet",value:function(){var e=this;c.a.send("VKWebAppGetAuthToken",{app_id:7836118,scope:"groups"}).then(function(t){var n=t.access_token;e.getFriendGetToken(n)}).catch(function(e){})}},{key:"closePopout",value:function(){this.setState({popout:null})}},{key:"closeModal",value:function(){this.setState({activeModal:null}),this.setState({copy:!0})}},{key:"closeModalTokenFriends",value:function(){this.setState({error_menu:!1,error_keyboard:!0}),this.setState({error_text:"\u041f\u043e\u0445\u043e\u0436\u0435, \u0412\u044b \u043d\u0435 \u043f\u0440\u0435\u0434\u043e\u0441\u0442\u0430\u0432\u0438\u043b\u0438 \u0434\u043e\u0441\u0442\u0443\u043f \u043a \u0441\u0432\u043e\u0438\u043c \u0433\u0440\u0443\u043f\u043f\u0430\u043c :("}),this.setState({copy:!0}),this.setState({snackbar:null})}},{key:"render",value:function(){return r.a.createElement(m.b,{isWebView:!0},r.a.createElement(m.e,{popout:this.state.popout,activePanel:this.state.activePanel},r.a.createElement(B,{id:"home",chat_link:this.state.chat_link,contest_link:this.state.contest_link,name:"\u0412\u0435\u0437\u0434\u0435\u043a\u043e\u0434\u0435\u0440\u044b",fetching:this.state.fetching,onRefresh:this.onRefresh,fetchedUser:this.state.fetchedUser,snackbar:this.state.snackbar,friend_items:this.state.friend_items,friends_count:this.state.friends_count,is_token_friends:this.state.is_token_friends,error_menu:this.state.error_menu,error_keyboard:this.state.error_keyboard,error_text:this.state.error_text,getFriendGet:this.getFriendGet,getFriendGetModal:this.getFriendGetModal,verifyNewPromise:this.verifyNewPromise,goBack:this.goBack}),r.a.createElement(D,{id:"errorconnect",name:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...",description:this.state.errorDescription,go:this.go})))}}]),t}(r.a.Component);c.a.send("VKWebAppInit",{}),c.a.subscribe(function(e){var t=e.detail,n=t.type,a=t.data;if("VKWebAppUpdateConfig"===n){var r=document.createAttribute("scheme");r.value=a.scheme?a.scheme:"client_light",document.body.attributes.setNamedItem(r),c.a.supports("VKWebAppSetViewSettings")&&c.a.send("VKWebAppSetViewSettings",{status_bar_style:"light"===a.appearance?"dark":"light"})}}),o.a.render(r.a.createElement(re,null),document.getElementById("root"))},82:function(e,t,n){}},[[184,1,2]]]);